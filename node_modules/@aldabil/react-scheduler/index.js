(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>$e});const n=require("react/jsx-runtime"),r=require("react"),a=require("date-fns"),s=(e,t,n)=>{var r;const a=(null===(r=e.config)||void 0===r?void 0:r.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),s=a?t?[t]:[]:t;return{value:s,validity:a?s.length:s}},i=(e,t,n,r)=>{var a;const s=n.idField,i=r.find((e=>e.name===s)),o=!!(null===(a=null==i?void 0:i.config)||void 0===a?void 0:a.multiple),l=[];for(const r of e){const e=o&&!Array.isArray(r[s])?[r[s]]:r[s];(o?e.includes(t[s]):e===t[s])&&l.push(Object.assign(Object.assign({},r),{color:r.color||t[n.colorField||""]}))}return l},o=(e,t)=>Math.ceil(e)/t,l=(e,t)=>Math.max(e/t,60),d=(e,t)=>(0,a.differenceInDays)((0,a.endOfDay)(t),(0,a.startOfDay)(e)),c=(e,t)=>e.filter((e=>!e.allDay&&(0,a.isSameDay)(t,e.start)&&!d(e.start,e.end))).sort(((e,t)=>e.end.getTime()-t.end.getTime())),u=(e,t)=>Array.isArray(t)?e.filter((e=>(e.allDay||d(e.start,e.end)>0)&&t.some((t=>(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))))):e.filter((e=>(e.allDay||d(e.start,e.end)>0)&&(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))),g=require("date-fns/locale/en-US");var h=e.n(g);const p={height:600,month:{weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,navigation:!0},week:{weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,step:60,navigation:!0},day:{startHour:9,endHour:17,step:60,navigation:!0},view:"week",navigation:!0,selectedDate:new Date,events:[],remoteEvents:void 0,fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceFields:{idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:h(),deletable:!0,editable:!0,translations:{navigation:{month:"Month",week:"Week",day:"Day",today:"Today"},form:{addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},event:{title:"Title",start:"Start",end:"End",allDay:"All Day"},moreEvents:"More..."},hourFormat:"12",draggable:!0},y=(0,r.createContext)(Object.assign(Object.assign({},p),{mounted:!1,dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}})),v=(e,t)=>{switch(t.type){case"updateProps":return Object.assign(Object.assign({},e),t.payload);case"set":const{name:n,value:r}=t.payload;return Object.assign(Object.assign({},e),{[n]:r});case"triggerDialog":const a=t.payload.selected;return Object.assign(Object.assign({},e),{dialog:t.payload.status,selectedRange:(null==a?void 0:a.event_id)?null:a,selectedEvent:(null==a?void 0:a.event_id)?a:null});case"triggerLoading":return Object.assign(Object.assign({},e),{loading:t.payload});default:return e}};const m=({initial:e,children:t})=>{const{events:i,remoteEvents:o,resources:l,resourceViewMode:d,month:c,week:u,day:g,fields:h,locale:m,direction:f,loading:j,onEventDrop:x}=e,[b,O]=(0,r.useReducer)(v,(e=>{const t=e.view&&e[e.view]?e.view:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(e);return Object.assign(Object.assign({},e),{view:t,dialog:!1,mounted:!1,selectedRange:void 0,fields:[...p.fields,...e.fields||[]]})})(e)),w=(e,t)=>{O({type:"set",payload:{name:t,value:e}})};(0,r.useEffect)((()=>{b.mounted?O({type:"updateProps",payload:{events:i,remoteEvents:o,resources:l,resourceViewMode:d,month:c,week:u,day:g,fields:h,locale:m,direction:f,loading:j}}):w(!0,"mounted")}),[i,o,l,d,c,u,g,h,m,f,j]);const _=(e,t)=>{let n;n="edit"===t?b.events.map((t=>t.event_id===e.event_id?Object.assign(Object.assign({},t),e):t)):[...b.events,e],w(n,"events")},D=()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(b),k=e=>{void 0===j&&O({type:"triggerLoading",payload:e})};return(0,n.jsx)(y.Provider,Object.assign({value:Object.assign(Object.assign({},b),{handleState:w,getViews:D,triggerDialog:(e,t)=>{O({type:"triggerDialog",payload:{status:e,selected:t}})},triggerLoading:k,handleGotoDay:e=>{const t=D();t.includes("day")?(w("day","view"),w(e,"selectedDate")):t.includes("week")?(w("week","view"),w(e,"selectedDate")):console.warn("No Day/Week views available")},confirmEvent:_,onDrop:(e,t,n,r)=>{return i=void 0,o=void 0,d=function*(){var i;const o=b.events.find((t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e)),l=b.fields.find((e=>e.name===n)),d=!!(null===(i=null==l?void 0:l.config)||void 0===i?void 0:i.multiple);let c=r;if(l){const e=o[n],i=s(l,e,o).value;if(d)if(i.includes(r)){if((0,a.isEqual)(o.start,t))return;c=i}else c=i.length>1?[...i,r]:[r]}if((0,a.isEqual)(o.start,t)&&(!c||!d&&c===o[n]))return;const u=(0,a.differenceInMinutes)(o.end,o.start),g=Object.assign(Object.assign({},o),{start:t,end:(0,a.addMinutes)(t,u),[n]:c||""});if(!x||"function"!=typeof x)return _(g,"edit");try{k(!0);const e=yield x(t,g,o);e&&_(e,"edit")}finally{k(!1)}},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{a(d.next(e))}catch(e){t(e)}}function r(e){try{a(d.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,r)}a((d=d.apply(i,o||[])).next())}));var i,o,l,d}})},{children:t}))},f=require("@mui/material"),j=({date:e,onClick:t,locale:r})=>(0,n.jsxs)("div",{children:[(0,n.jsx)(f.Typography,Object.assign({style:{fontWeight:(0,a.isToday)(e)?"bold":"inherit"},color:(0,a.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:(0,a.format)(e,"dd",{locale:r})})),(0,n.jsx)(f.Typography,Object.assign({color:(0,a.isToday)(e)?"primary":"inherit",style:{fontWeight:(0,a.isToday)(e)?"bold":"inherit",fontSize:11}},{children:(0,a.format)(e,"eee",{locale:r})}))]}),x=()=>(0,r.useContext)(y),b=require("@mui/icons-material/ArrowRightRounded");var O=e.n(b);const w=require("@mui/icons-material/ArrowLeftRounded");var _=e.n(w);const D=require("@mui/icons-material/EventNoteRounded");var k=e.n(D);const M=require("@mui/icons-material/ClearRounded");var C=e.n(M);const T=require("@mui/icons-material/SupervisorAccountRounded");var S=e.n(T);const F=(0,f.styled)("div")((({theme:e,dialog:t})=>({position:"relative",overflow:"hidden","& .rs__table_loading":{background:t?"":(0,f.alpha)(e.palette.background.paper,.4),position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}}))),E=(0,f.styled)("div")((({resource_count:e})=>({position:"relative",display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,width:"100%",overflowX:"auto",overflowY:"hidden",boxSizing:"content-box"}))),P=(0,f.styled)("div")((({days:e,indent:t="1",theme:n})=>({position:"relative",display:"grid",gridTemplateColumns:+t>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,[n.breakpoints.down("sm")]:{gridTemplateColumns:+t>0?`30px repeat(${e}, 1fr)`:""},"&:first-of-type":{borderStyle:"solid",borderColor:"#eee",borderWidth:"0 1px 1px 0"},"& .rs__cell":{position:"relative","&.rs__header > :first-of-type":{padding:"2px 5px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",[n.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},borderColor:"#eee",borderWidth:"1px 0px 0px 1px",borderStyle:"solid","& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,f.alpha)(n.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}}}))),I=(0,f.styled)("div")((({theme:e})=>({maxWidth:"100%",width:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),$=(0,f.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),H=(0,f.styled)("div")((({theme:e})=>({position:"absolute",zIndex:e.zIndex.appBar,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),W=require("@mui/icons-material/DeleteRounded");var R=e.n(W);const N=require("@mui/icons-material/EditRounded");var B=e.n(N);const q=({event:e,onDelete:t,onEdit:a,direction:s,editable:i,deletable:o})=>{const{translations:l}=x(),[d,c]=(0,r.useState)(!1),u=()=>{if(!d)return c(!0);t()},g=(0,r.useMemo)((()=>void 0!==e.deletable?e.deletable:o),[o,e.deletable]),h=(0,r.useMemo)((()=>void 0!==e.editable?e.editable:i),[i,e.editable]);return(0,n.jsxs)($,{children:[(0,n.jsx)(f.Grow,Object.assign({in:!d,exit:!1,timeout:400,unmountOnExit:!0},{children:(0,n.jsxs)("div",{children:[h&&(0,n.jsx)(f.IconButton,Object.assign({size:"small",onClick:a},{children:(0,n.jsx)(B(),{})})),g&&(0,n.jsx)(f.IconButton,Object.assign({size:"small",onClick:u},{children:(0,n.jsx)(R(),{})}))]})})),(0,n.jsx)(f.Slide,Object.assign({in:d,direction:"rtl"===s?"right":"left",unmountOnExit:!0,timeout:400,exit:!1},{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(f.Button,Object.assign({className:"delete",size:"small",onClick:u},{children:l.form.delete.toUpperCase()})),(0,n.jsx)(f.Button,Object.assign({className:"cancel",size:"small",onClick:()=>c(!1)},{children:l.form.cancel.toUpperCase()}))]})}))]})};const z=({event:e,multiday:t,hasPrev:s,hasNext:i,showdate:o})=>{const{triggerDialog:l,onDelete:c,events:u,handleState:g,triggerLoading:h,viewerExtraComponent:p,fields:y,direction:v,resources:m,resourceFields:j,locale:b,viewerTitleComponent:w,editable:D,deletable:M,hourFormat:T,eventRenderer:F,view:E,draggable:P,translations:$}=x(),[H,W]=(0,r.useState)(null),[R,N]=(0,r.useState)(!1),B=(0,f.useTheme)(),z="12"===T?"hh:mm a":"HH:mm",A="rtl"===v?_():O(),L="rtl"===v?O():_(),V=d(e.start,e.end)<=0&&e.allDay,G=e=>{!e&&R&&N(!1),W(e||null)},K=()=>{return t=void 0,n=void 0,a=function*(){try{h(!0);let t=e.event_id;if(c){const e=yield c(t);t=e||""}if(t){const e=u.filter((e=>e.event_id!==t));g(e,"events"),G()}}catch(e){console.error(e)}finally{h(!1)}},new((r=void 0)||(r=Promise))((function(e,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a},U=(0,r.useMemo)((()=>{if("function"==typeof F&&!t&&"month"!==E){const t=F(e);if(t)return t}let r=(0,n.jsxs)("div",Object.assign({style:{padding:2}},{children:[(0,n.jsx)(f.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),o&&(0,n.jsx)(f.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${(0,a.format)(e.start,z,{locale:b})} - ${(0,a.format)(e.end,z,{locale:b})}`}))]}));return t&&(r=(0,n.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,n.jsx)(f.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?(0,n.jsx)(L,{fontSize:"small",sx:{display:"flex"}}):o&&!V&&(0,a.format)(e.start,z,{locale:b})})),(0,n.jsx)(f.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),(0,n.jsx)(f.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:i?(0,n.jsx)(A,{fontSize:"small",sx:{display:"flex"}}):o&&!V&&(0,a.format)(e.end,z,{locale:b})}))]}))),r}),[s,i,e]),Q=(0,r.useMemo)((()=>{if(e.disabled)return!1;let t=void 0===P||P;return void 0!==e.draggable&&(t=e.draggable),t}),[]);return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(f.Paper,Object.assign({style:{width:"100%",height:"100%",display:"block",background:e.disabled?"#d0d0d0":e.color||B.palette.primary.main,color:e.disabled?"#808080":B.palette.primary.contrastText,cursor:e.disabled?"not-allowed":"pointer",overflow:"hidden"}},{children:(0,n.jsx)(f.ButtonBase,Object.assign({onClick:e=>{e.preventDefault(),e.stopPropagation(),G(e.currentTarget)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"}},{children:(0,n.jsx)("div",Object.assign({style:{height:"100%"},draggable:Q,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",`${e.event_id}`),t.currentTarget.style.backgroundColor=B.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||B.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}},{children:U}))}))})),(0,n.jsx)(f.Popover,Object.assign({open:Boolean(H),anchorEl:H,onClose:()=>{G()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:(()=>{const t=j.idField,r=m.filter((n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]));return(0,n.jsxs)(I,{children:[(0,n.jsxs)("div",Object.assign({style:{background:e.color||B.palette.primary.main,color:B.palette.primary.contrastText}},{children:[(0,n.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[(0,n.jsx)("div",{children:(0,n.jsx)(f.IconButton,Object.assign({size:"small",onClick:()=>{G()}},{children:(0,n.jsx)(C(),{color:"disabled"})}))}),(0,n.jsx)(q,{event:e,onDelete:K,onEdit:()=>{G(),l(!0,e)},direction:v,deletable:M,editable:D})]})),w instanceof Function?w(e):(0,n.jsx)(f.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}))]})),(0,n.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[(0,n.jsxs)(f.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(k(),{}),V?$.event.allDay:`${(0,a.format)(e.start,`dd MMMM yyyy ${z}`,{locale:b})} - ${(0,a.format)(e.end,`dd MMMM yyyy ${z}`,{locale:b})}`]})),r.length>0&&(0,n.jsxs)(f.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(S(),{}),r.map((e=>e[j.textField])).join(", ")]})),p instanceof Function?p(y,e):p]}))]})})()}))]})};z.defaultProps={multiday:!1,showdate:!0};const A=z,L=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:a,resources:s,direction:i,resourceViewMode:o}=x(),{width:l}=function(){const[e,t]=(0,r.useState)({width:0,height:0});return(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>{t((e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e}))};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}}),[]),e}(),d=e[a.textField],c=e[a.subTextField||""],u=e[a.avatarField||""],g=e[a.colorField||""];if(t instanceof Function)return t(e);const h="tabs"===o?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return(0,n.jsxs)(f.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===i?"right":"left"},h),component:"span"},{children:[(0,n.jsx)(f.ListItemAvatar,{children:(0,n.jsx)(f.Avatar,{style:{background:g},alt:d,src:u})}),(0,n.jsx)(f.ListItemText,{primary:(0,n.jsx)(f.Typography,Object.assign({variant:"body2",noWrap:!0},{children:d})),secondary:(0,n.jsx)(f.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:c})),style:{width:l/(s.length+1)}})]}))},V=require("prop-types");var G=e.n(V);const K=require("@mui/material/styles");function U(e){const{children:t,value:r,index:a}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","value","index"]);return r===a?(0,n.jsx)(f.Box,Object.assign({},s,{children:t})):(0,n.jsx)(n.Fragment,{})}U.propTypes={children:G().node,index:G().any.isRequired,value:G().any.isRequired};const Q=(0,K.styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px","& button.MuiTab-root":{borderRight:"1px solid #eee"}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),X=({tabs:e,variant:t,tab:r,setTab:a,indicator:s,style:i})=>(0,n.jsxs)(Q,Object.assign({style:i},{children:[(0,n.jsx)(f.Tabs,Object.assign({value:r,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s}},{children:e.map(((e,t)=>{return(0,n.jsx)(f.Tab,Object.assign({label:e.label,value:e.id},{id:`scrollable-auto-tab-${r=e.id}`,"aria-controls":`scrollable-auto-tabpanel-${r}`},{onClick:()=>a(e.id),onDragEnter:()=>a(e.id)}),e.id||t);var r}))})),e.map(((e,t)=>e.component&&(0,n.jsx)(U,Object.assign({value:r,index:e.id},{children:e.component}),t)))]}));X.defaultProps={variant:"scrollable",indicator:"primary"};const Z=({renderChildren:e})=>{const{resourceViewMode:t}=x();return"tabs"===t?(0,n.jsx)(J,{renderChildren:e}):(0,n.jsx)(Y,{renderChildren:e})},Y=({renderChildren:e})=>{const{resources:t,resourceFields:r}=x();return(0,n.jsx)(n.Fragment,{children:t.map(((t,a)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(L,{resource:t}),e(t)]},`${t[r.idField]}_${a}`)))})},J=({renderChildren:e})=>{const{resources:t,resourceFields:r,selectedResource:a,handleState:s}=x(),i=t.map((t=>({id:t[r.idField],label:(0,n.jsx)(L,{resource:t}),component:(0,n.jsx)(n.Fragment,{children:e(t)})})));return(0,n.jsx)(X,{tabs:i,tab:a||t[0][r.idField],setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})};Z.defaultProps={span:1};const ee=({day:e,start:t,end:r,resourceKey:a,resourceVal:s,cellRenderer:i,height:o,children:l})=>{const d=(({start:e,end:t,resourceKey:n,resourceVal:r})=>{const{triggerDialog:a,onDrop:s}=x(),i=(0,f.useTheme)();return{onClick:()=>{a(!0,{start:e,end:t,[n]:r})},onDragOver:e=>{e.currentTarget.style.backgroundColor=(0,f.alpha)(i.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=(0,f.alpha)(i.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const a=t.dataTransfer.getData("text");s(a,e,n,r)},[n]:r}})({start:t,end:r,resourceKey:a,resourceVal:s});return i?i(Object.assign({day:e,start:t,end:r,height:o},d)):(0,n.jsx)(f.Button,Object.assign({fullWidth:!0},d,{children:l}))};function te({today:e,startHour:t,step:n,minuteHeight:r}){const s=new Date,i=(0,a.differenceInMinutes)(s,(0,a.setHours)(e,t));return i*r+(i/n+1)}const ne=e=>{const[t,a]=(0,r.useState)(te(e));return(0,r.useEffect)((()=>{const t=setInterval((()=>a(te(e))),6e4);return()=>clearInterval(t)}),[]),t<0?null:(0,n.jsx)(r.Fragment,{children:(0,n.jsxs)(H,Object.assign({style:{top:t}},{children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}))})},re=({todayEvents:e,today:t,startHour:s,step:i,minuteHeight:o,direction:l})=>{const d=[];return(0,n.jsxs)(r.Fragment,{children:[(0,a.isToday)(t)&&(0,n.jsx)(ne,{today:t,startHour:s,step:i,minuteHeight:o}),e.map((r=>{const c=(0,a.differenceInMinutes)(r.end,r.start)*o,u=(0,a.differenceInMinutes)(r.start,(0,a.setHours)(t,s)),g=u*o+(u/i+1),h=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,a.isWithinInterval)((0,a.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,a.isWithinInterval)((0,a.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,a.isWithinInterval)((0,a.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,a.isWithinInterval)((0,a.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,r),p=h.filter((e=>d.includes(e.event_id)));return d.push(r.event_id),(0,n.jsx)("div",Object.assign({className:"rs__event__item",style:{height:c,top:g,width:h.length?100/(h.length+1)+"%":"95%",["rtl"===l?"right":"left"]:p.length>0?`calc(100%/${p.length+1})`:""}},{children:(0,n.jsx)(A,{event:r})}),r.event_id)}))]})};var ae=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const se=()=>{const{week:e,selectedDate:t,height:s,events:g,handleGotoDay:h,remoteEvents:p,getRemoteEvents:y,triggerLoading:v,handleState:m,resources:b,resourceFields:O,fields:w,direction:_,locale:D,hourFormat:k}=x(),{weekStartOn:M,weekDays:C,startHour:T,endHour:S,step:F,cellRenderer:E}=e,I=(0,a.startOfWeek)(t,{weekStartsOn:M}),$=C.map((e=>(0,a.addDays)(I,e))),H=(0,a.startOfDay)($[0]),W=(0,a.endOfDay)($[$.length-1]),R=(0,a.setMinutes)((0,a.setHours)(t,T),0),N=(0,a.setMinutes)((0,a.setHours)(t,S),0),B=(0,a.eachMinuteOfInterval)({start:R,end:N},{step:F}),q=l(s,B.length),z=o(q,F),L="12"===k?"hh:mm a":"HH:mm",V=(0,r.useCallback)((()=>ae(void 0,void 0,void 0,(function*(){try{v(!0);const e=yield ae(void 0,void 0,void 0,(function*(){return p?yield p(`?start=${H}&end=${W}`):yield y({start:H,end:W,view:"week"})}));Array.isArray(e)&&m(e,"events")}catch(e){throw e}finally{v(!1)}}))),[t,p,y]);(0,r.useEffect)((()=>{(p||y)instanceof Function&&V()}),[t,p,y]);const G=(e,t)=>{const r=(0,a.isSameDay)(H,t);return u(e,$).filter((e=>(0,a.isBefore)(e.start,H)?r:(0,a.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map(((s,i)=>{const o=(0,a.isBefore)((0,a.startOfDay)(s.start),H),l=(0,a.isAfter)((0,a.endOfDay)(s.end),W),c=d(o?H:s.start,l?W:s.end)+1,u=e.filter((e=>!r&&e.event_id!==s.event_id&&(0,a.isWithinInterval)(t,{start:e.start,end:e.end})));let g=i;return u.length&&(g+=u.length),(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*g+45,width:100*c+"%"}},{children:(0,n.jsx)(A,{event:s,hasPrev:o,hasNext:l,multiday:!0})}),s.event_id)}))},K=e=>{let t=g;e&&(t=i(g,e,O,w));const s=28*g.filter((e=>e.allDay||d(e.start,e.end)>0&&$.some((t=>(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))))).length+45;return(0,n.jsxs)(P,Object.assign({days:$.length},{children:[(0,n.jsx)("span",{className:"rs__cell"}),$.map(((e,r)=>(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,a.isToday)(e)?"rs__today_cell":""),style:{height:s}},{children:[(0,n.jsx)(j,{date:e,onClick:h,locale:D}),G(t,e)]}),r))),B.map(((s,i)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{height:q},className:"rs__cell rs__header rs__time"},{children:(0,n.jsx)(f.Typography,Object.assign({variant:"caption"},{children:(0,a.format)(s,L,{locale:D})}))})),$.map(((r,o)=>{const l=new Date(`${(0,a.format)(r,"yyyy/MM/dd")} ${(0,a.format)(s,L)}`),d=new Date(`${(0,a.format)(r,"yyyy/MM/dd")} ${(0,a.format)((0,a.addMinutes)(s,F),L)}`),u=O.idField;return(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,a.isToday)(r)?"rs__today_cell":"")},{children:[0===i&&(0,n.jsx)(re,{todayEvents:c(t,r),today:r,minuteHeight:z,startHour:T,step:F,direction:_}),(0,n.jsx)(ee,{start:l,end:d,day:r,height:q,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:E})]}),o)}))]},i)))]}))};return b.length?(0,n.jsx)(Z,{renderChildren:K}):K()},ie=require("@mui/x-date-pickers/LocalizationProvider"),oe=require("@mui/x-date-pickers/AdapterDateFns"),le=({children:e})=>{const{locale:t}=x();return(0,n.jsx)(ie.LocalizationProvider,Object.assign({dateAdapter:oe.AdapterDateFns,adapterLocale:t},{children:e}))},de=require("@mui/x-date-pickers/DatePicker"),ce=require("@mui/icons-material/NavigateBeforeRounded");var ue=e.n(ce);const ge=require("@mui/icons-material/NavigateNextRounded");var he=e.n(ge);const pe=({type:e,onClick:t})=>{const{direction:r}=x();let a=he();return"prev"===e?a="rtl"===r?he():ue():"next"===e&&(a="rtl"===r?ue():he()),(0,n.jsx)(f.IconButton,Object.assign({style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()}},{children:(0,n.jsx)(a,{})}))},ye=({selectedDate:e,onChange:t,weekProps:s})=>{const{locale:i,navigationPickerProps:o}=x(),[l,d]=(0,r.useState)(!1),{weekStartOn:c}=s,u=(0,a.startOfWeek)(e,{weekStartsOn:c}),g=(0,a.endOfWeek)(e,{weekStartsOn:c}),h=()=>d(!l);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{type:"prev",onClick:()=>{const e=(0,a.addDays)(u,-1);t(e,"selectedDate")}}),(0,n.jsx)(le,{children:(0,n.jsx)(de.DatePicker,Object.assign({},o,{open:l,onClose:h,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:e=>(0,n.jsx)(f.Button,Object.assign({ref:e.inputRef,style:{padding:4},onClick:h},{children:`${(0,a.format)(u,"dd",{locale:i})} - ${(0,a.format)(g,"dd MMMM yyyy",{locale:i})}`}))}))}),(0,n.jsx)(pe,{type:"next",onClick:()=>{const e=(0,a.addDays)(g,1);t(e,"selectedDate")}})]})},ve=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:i}=x(),[o,l]=(0,r.useState)(!1),d=()=>l(!o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{type:"prev",onClick:()=>{const n=(0,a.addDays)(e,-1);t(n,"selectedDate")}}),(0,n.jsx)(le,{children:(0,n.jsx)(de.DatePicker,Object.assign({},i,{open:o,onClose:d,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:t=>(0,n.jsx)(f.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:d},{children:`${(0,a.format)(e,"dd, MMMM yyyy",{locale:s})}`}))}))}),(0,n.jsx)(pe,{type:"next",onClick:()=>{const n=(0,a.addDays)(e,1);t(n,"selectedDate")}})]})},me=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:i}=x(),[o,l]=(0,r.useState)(!1),d=(0,a.getMonth)(e),c=()=>l(!o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{type:"prev",onClick:()=>{const n=d-1;t((0,a.setMonth)(e,n),"selectedDate")}}),(0,n.jsx)(le,{children:(0,n.jsx)(de.DatePicker,Object.assign({},i,{open:o,onClose:c,openTo:"month",views:["year","month"],value:e,onChange:e=>{console.log(e),t(e||new Date,"selectedDate")},renderInput:t=>(0,n.jsx)(f.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:c},{children:(0,a.format)(e,"MMMM yyyy",{locale:s})}))}))}),(0,n.jsx)(pe,{type:"next",onClick:()=>{const n=d+1;t((0,a.setMonth)(e,n),"selectedDate")}})]})},fe=require("@mui/icons-material/MoreVert");var je=e.n(fe);const xe=()=>{const{selectedDate:e,view:t,week:a,handleState:s,getViews:i,translations:o,navigation:l,day:d,month:c}=x(),[u,g]=(0,r.useState)(null),h=(0,f.useTheme)(),p=(0,f.useMediaQuery)(h.breakpoints.up("sm")),y=i(),v=e=>{g(e||null)};return(0,n.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(0,n.jsx)("div",Object.assign({"data-testid":"date-navigator"},{children:l&&(()=>{switch(t){case"month":return(null==c?void 0:c.navigation)&&(0,n.jsx)(me,{selectedDate:e,onChange:s});case"week":return(null==a?void 0:a.navigation)&&(0,n.jsx)(ye,{selectedDate:e,onChange:s,weekProps:a});case"day":return(null==d?void 0:d.navigation)&&(0,n.jsx)(ve,{selectedDate:e,onChange:s});default:return""}})()})),(0,n.jsxs)("div",Object.assign({"data-testid":"view-navigator"},{children:[(0,n.jsx)(f.Button,Object.assign({onClick:()=>s(new Date,"selectedDate")},{children:o.navigation.today})),y.length>1&&(p?y.map((e=>(0,n.jsx)(f.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>s(e,"view"),onDragOver:t=>{t.preventDefault(),s(e,"view")}},{children:o.navigation[e]}),e))):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(f.IconButton,Object.assign({style:{padding:5},onClick:e=>{v(e.currentTarget)}},{children:(0,n.jsx)(je(),{})})),(0,n.jsx)(f.Popover,Object.assign({open:Boolean(u),anchorEl:u,onClose:()=>{v()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:(0,n.jsx)(f.MenuList,Object.assign({autoFocusItem:!!u,disablePadding:!0},{children:y.map((e=>(0,n.jsx)(f.MenuItem,Object.assign({selected:e===t,onClick:()=>{v(),s(e,"view")}},{children:o.navigation[e]}),e)))}))}))]}))]}))]}))},be=require("@mui/x-date-pickers/DateTimePicker"),Oe=({type:e,value:t,label:r,name:a,onChange:s,variant:i,error:o,errMsg:l})=>{const d="date"===e?de.DatePicker:be.DateTimePicker;return(0,n.jsx)(le,{children:(0,n.jsx)(d,{value:t,label:r,onChange:e=>s(a,new Date(e||"")),minutesStep:5,renderInput:e=>(0,n.jsx)(f.TextField,Object.assign({variant:i,helperText:o?l:"",error:o,style:{width:"100%"}},e))})})};Oe.defaultProps={type:"datetime",variant:"outlined"};const we=({variant:e,label:t,placeholder:a,value:s,name:i,required:o,min:l,max:d,email:c,decimal:u,onChange:g,disabled:h,multiline:p,rows:y,touched:v})=>{const[m,j]=(0,r.useState)({touched:!1,valid:!1,errorMsg:""});(0,r.useEffect)((()=>{v&&x(s)}),[v]);const x=e=>{const t=e;let n=!0,r="";c&&(n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,r="Invalid Email"),u&&(n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,r="Only Numbers Allowed"),l&&`${t}`.trim().length<l&&(n=!1,r=`Minimum ${l} letters`),d&&`${t}`.trim().length>d&&(n=!1,r=`Maximum ${d} letters`),o&&`${t}`.trim().length<=0&&(n=!1,r="Required"),j({touched:!0,valid:n,errorMsg:r}),g(i,t,n)};return(0,n.jsx)(f.TextField,{variant:e,label:t&&(0,n.jsx)(f.Typography,Object.assign({variant:"body2"},{children:`${t} ${o?"*":""}`})),value:s,name:i,onChange:e=>x(e.target.value),disabled:h,error:m.touched&&!m.valid,helperText:m.touched&&!m.valid&&m.errorMsg,multiline:p,rows:y,style:{width:"100%"},InputProps:{placeholder:a||""}})};we.defaultProps={variant:"outlined"};const _e=require("@mui/icons-material/ExpandMore");var De=e.n(_e);const ke=({options:e,value:t,name:a,required:s,onChange:i,label:o,disabled:l,touched:d,variant:c,loading:u,multiple:g,placeholder:h,errMsg:p})=>{const y=(0,f.useTheme)(),[v,m]=(0,r.useState)({touched:!1,valid:!!t,errorMsg:p||(s?"Required":void 0)});(0,r.useEffect)((()=>{d&&j(t)}),[d]);const j=e=>{const t=e;let n=!0,r=p;!s||(g?t.length:t)||(n=!1,r="Required"),m((e=>Object.assign(Object.assign({},e),{touched:!0,valid:n,errorMsg:r}))),i(a,t,n)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(f.FormControl,Object.assign({variant:c||"outlined",fullWidth:!0,error:s&&v.touched&&!v.valid,disabled:l},{children:[o&&(0,n.jsx)(f.InputLabel,Object.assign({id:`input_${a}`},{children:(0,n.jsx)(f.Typography,Object.assign({variant:"body2"},{children:`${o} ${s?"*":""}`}))})),(0,n.jsxs)(f.Select,Object.assign({label:o,labelId:`input_${a}`,value:t,onBlur:()=>{v.touched||m((e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:p||e.errorMsg})))},onChange:e=>j(e.target.value),IconComponent:u?()=>(0,n.jsx)(f.CircularProgress,{size:5}):De(),multiple:!!g,classes:{select:"chips"===g?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,n.jsx)("em",{children:o});const r=[];if(g){for(const n of e)t.includes(n.value)&&r.push([n.text]);return"chips"===g?r.map(((e,t)=>(0,n.jsx)(f.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):r.join(",")}for(const n of e)t===n.value&&r.push([n.text]);return r.join(",")}},{children:[h&&(0,n.jsx)(f.MenuItem,Object.assign({value:""},{children:(0,n.jsx)("em",{children:h})})),e.map((e=>(0,n.jsxs)(f.MenuItem,Object.assign({value:e.value},{children:[g&&(0,n.jsx)(f.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value)))]}))]})),(0,n.jsx)(f.FormHelperText,Object.assign({style:{color:y.palette.error.main}},{children:v.touched&&!v.valid&&v.errorMsg}))]})};ke.defaultProps={variant:"outlined"};const Me=(e,t)=>{var n;const r={};for(const a of e){const e=s(a,a.default,t),i=s(a,null==t?void 0:t[a.name],t);r[a.name]={value:i.value||e.value||"",validity:!(null===(n=a.config)||void 0===n?void 0:n.required)||!!i.validity||!!e.validity,type:a.type,config:a.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},r)},Ce=()=>{const{fields:e,dialog:t,triggerDialog:s,selectedRange:i,selectedEvent:o,triggerLoading:l,onConfirm:d,customEditor:c,confirmEvent:u,dialogMaxWidth:g,translations:h}=x(),[p,y]=(0,r.useState)(Me(e,o||i)),[v,m]=(0,r.useState)(!1),j=(0,f.useTheme)(),b=(0,f.useMediaQuery)(j.breakpoints.down("sm")),O=(e,t,n)=>{y((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{value:t,validity:n})})))},w=t=>{t&&y(Me(e)),s(!1)},_=()=>{return e=void 0,t=void 0,r=function*(){let e={};for(const t in p)if(e[t]=p[t].value,!c&&!p[t].validity)return m(!0);try{l(!0),e.end=e.start>=e.end?(0,a.addMinutes)(e.start,(0,a.differenceInMinutes)(null==i?void 0:i.end,null==i?void 0:i.start)):e.end;const t=(null==o?void 0:o.event_id)?"edit":"create";d?e=yield d(e,t):e.event_id=(null==o?void 0:o.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),u(e,t),w(!0)}catch(e){console.error(e)}finally{l(!1)}},new((n=void 0)||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},D=t=>{var r,a,s;const i=p[t];switch(i.type){case"input":return(0,n.jsx)(we,Object.assign({value:i.value,name:t,onChange:O,touched:v},i.config,{label:h.event[t]||(null===(r=i.config)||void 0===r?void 0:r.label)}));case"date":return(0,n.jsx)(Oe,Object.assign({value:i.value,name:t,onChange:(...e)=>O(...e,!0)},i.config,{label:h.event[t]||(null===(a=i.config)||void 0===a?void 0:a.label)}));case"select":const o=e.find((e=>e.name===t));return(0,n.jsx)(ke,Object.assign({value:i.value,name:t,options:(null==o?void 0:o.options)||[],onChange:O,touched:v},i.config,{label:h.event[t]||(null===(s=i.config)||void 0===s?void 0:s.label)}));default:return""}};return(0,n.jsx)(f.Dialog,Object.assign({open:t,fullScreen:b,maxWidth:g},{children:c?c({state:p,close:()=>s(!1),loading:e=>l(e),edited:o,onConfirm:u}):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(f.DialogTitle,{children:o?h.form.editTitle:h.form.addTitle}),(0,n.jsx)(f.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:(0,n.jsx)(f.Grid,Object.assign({container:!0,spacing:2},{children:Object.keys(p).map((e=>{var t;const r=p[e];return(0,n.jsx)(f.Grid,Object.assign({item:!0,sm:null===(t=r.config)||void 0===t?void 0:t.sm,xs:12},{children:D(e)}),e)}))}))})),(0,n.jsxs)(f.DialogActions,{children:[(0,n.jsx)(f.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>w()},{children:h.form.cancel})),(0,n.jsx)(f.Button,Object.assign({color:"primary",fullWidth:!0,onClick:_},{children:h.form.confirm}))]})]})}))},Te=({events:e,today:t,eachWeekStart:s,daysList:i,onViewMore:o,cellHeight:l})=>{const c=Math.round((l-27)/28-1),{translations:u}=x(),g=s.some((e=>(0,a.isSameDay)(e,t)))?t:null,h=e.filter((e=>!(!g||!(0,a.isWithinInterval)(g,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))||(0,a.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime()));return(0,n.jsx)(r.Fragment,{children:h.map(((r,l)=>{const p=!!g&&(0,a.isBefore)(r.start,g),y=p&&g?g:r.start;let v=d(y,r.end)+1;const m=v>=i.length;if(m){const e=(0,a.startOfWeek)(r.start),t=(0,a.closestTo)(e,s);t&&(v=i.length-(g?0:d(r.start,t)))}const j=e.filter((e=>!g&&e.event_id!==r.event_id&&c>l&&(0,a.isBefore)(e.start,(0,a.startOfDay)(t))&&(0,a.isAfter)(e.end,(0,a.startOfDay)(t))));let x=l;j.length&&(x+=j.length);const b=28*x+27;return x>c?"":x===c?(0,n.jsx)(f.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:b,fontSize:11},onClick:e=>{e.stopPropagation(),o(r.start)}},{children:`${Math.abs(h.length-l)} ${u.moreEvents}`}),l):(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:b,width:100*v+"%"}},{children:(0,n.jsx)(A,{event:r,showdate:!1,multiday:d(r.start,r.end)>0,hasPrev:p,hasNext:m})}),l)}))})};var Se=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const Fe=()=>{const{month:e,selectedDate:t,height:s,events:o,handleGotoDay:l,remoteEvents:d,getRemoteEvents:c,triggerLoading:u,handleState:g,resources:h,resourceFields:p,fields:y,locale:v,hourFormat:m}=x(),{weekStartOn:j,weekDays:b,startHour:O,endHour:w,cellRenderer:_}=e,D=(0,a.startOfMonth)(t),k=(0,a.endOfMonth)(t),M=(0,a.eachWeekOfInterval)({start:D,end:k},{weekStartsOn:j}),C="12"===m?"hh:mm a":"HH:mm",T=b.map((e=>(0,a.addDays)(M[0],e))),S=s/M.length,F=(0,f.useTheme)(),E=(0,r.useCallback)((()=>Se(void 0,void 0,void 0,(function*(){try{u(!0);const e=M[0],t=(0,a.addDays)(M[M.length-1],T.length),n=yield Se(void 0,void 0,void 0,(function*(){return d?yield d(`?start=${e}&end=${t}`):yield c({start:e,end:t,view:"month"})}));n&&(null==n?void 0:n.length)&&g(n,"events")}catch(e){throw e}finally{u(!1)}}))),[t,d,c]);(0,r.useEffect)((()=>{(d||c)instanceof Function&&E()}),[E]);const I=e=>{let s=o;e&&(s=i(o,e,p,y));const d=[];for(const i of M){const o=b.map((o=>{const d=(0,a.addDays)(i,o),c=new Date(`${(0,a.format)((0,a.setHours)(d,O),`yyyy/MM/dd ${C}`)}`),u=new Date(`${(0,a.format)((0,a.setHours)(d,w),`yyyy/MM/dd ${C}`)}`),g=p.idField;return(0,n.jsxs)("span",Object.assign({style:{height:S},className:"rs__cell"},{children:[(0,n.jsx)(ee,{start:c,end:u,day:t,height:S,resourceKey:g,resourceVal:e?e[g]:null,cellRenderer:_}),(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(f.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:(0,a.isToday)(d)?F.palette.secondary.main:"transparent",color:(0,a.isToday)(d)?F.palette.secondary.contrastText:"",marginBottom:2}},{children:(0,n.jsx)(f.Typography,Object.assign({color:(0,a.isSameMonth)(d,D)?"textPrimary":"#ccc",className:"rs__hover__op",onClick:e=>{e.stopPropagation(),l(d)}},{children:(0,a.format)(d,"dd")}))})),(0,n.jsx)(Te,{events:s,today:d,eachWeekStart:M,daysList:T,onViewMore:l,cellHeight:S})]})]}),o.toString())}));d.push((0,n.jsx)(r.Fragment,{children:o},i.toString()))}return d},$=e=>(0,n.jsxs)(P,Object.assign({days:T.length,indent:"0"},{children:[T.map(((e,t)=>(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header"},{children:(0,n.jsx)(f.Typography,Object.assign({align:"center",variant:"body2"},{children:(0,a.format)(e,"EE",{locale:v})}))}),t))),I(e)]}));return h.length?(0,n.jsx)(Z,{renderChildren:$}):$()};var Ee=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const Pe=()=>{const{day:e,selectedDate:t,events:s,height:d,remoteEvents:g,getRemoteEvents:h,triggerLoading:p,handleState:y,resources:v,resourceFields:m,fields:b,direction:O,locale:w,hourFormat:_}=x(),{startHour:D,endHour:k,step:M,cellRenderer:C}=e,T=(0,a.setMinutes)((0,a.setHours)(t,D),0),S=(0,a.setMinutes)((0,a.setHours)(t,k),0),F=(0,a.eachMinuteOfInterval)({start:T,end:S},{step:M}),E=l(d,F.length),I=o(E,M),$="12"===_?"hh:mm a":"HH:mm",H=s.sort(((e,t)=>t.end.getTime()-e.end.getTime())),W=(0,r.useCallback)((()=>Ee(void 0,void 0,void 0,(function*(){try{p(!0);const e=(0,a.addDays)(T,-1),t=(0,a.addDays)(S,1),n=yield Ee(void 0,void 0,void 0,(function*(){return g?yield g(`?start=${e}&end=${t}`):yield h({start:e,end:t,view:"day"})}));n&&(null==n?void 0:n.length)&&y(n,"events")}catch(e){throw e}finally{p(!1)}}))),[t,g,h]);(0,r.useEffect)((()=>{(g||h)instanceof Function&&W()}),[W]);const R=e=>{let o=H;e&&(o=i(H,e,m,b));const l=u(s,t),d=28*l.length+45;return(0,n.jsxs)(P,Object.assign({days:1},{children:[(0,n.jsx)("span",{className:"rs__cell"}),(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,a.isToday)(t)?"rs__today_cell":""),style:{height:d}},{children:[(0,n.jsx)(j,{date:t,locale:w}),(g=l,(0,n.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*g.length}},{children:g.map(((e,r)=>{const s=(0,a.isBefore)(e.start,(0,a.startOfDay)(t)),i=(0,a.isAfter)(e.end,(0,a.endOfDay)(t));return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*r,width:"100%"}},{children:(0,n.jsx)(A,{event:e,multiday:!0,hasPrev:s,hasNext:i})}),e.event_id)}))})))]})),F.map(((s,i)=>{const l=new Date(`${(0,a.format)(t,"yyyy/MM/dd")} ${(0,a.format)(s,$)}`),d=new Date(`${(0,a.format)(t,"yyyy/MM/dd")} ${(0,a.format)((0,a.addMinutes)(s,M),$)}`),u=m.idField;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:E}},{children:(0,n.jsx)(f.Typography,Object.assign({variant:"caption"},{children:(0,a.format)(s,$,{locale:w})}))})),(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,a.isToday)(t)?"rs__today_cell":"")},{children:[0===i&&(0,n.jsx)(re,{todayEvents:c(o,t),today:T,minuteHeight:I,startHour:D,step:M,direction:O}),(0,n.jsx)(ee,{start:l,end:d,day:t,height:E,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:C})]}))]},i)}))]}));var g};return v.length?(0,n.jsx)(Z,{span:2,renderChildren:R}):R()},Ie=()=>{const{loading:e,view:t,dialog:a,resources:s,resourceViewMode:i}=x(),o=(0,r.useMemo)((()=>{switch(t){case"month":return(0,n.jsx)(Fe,{});case"week":return(0,n.jsx)(se,{});case"day":return(0,n.jsx)(Pe,{});default:return""}}),[t]);return(0,n.jsxs)(F,Object.assign({dialog:a?1:0,"data-testid":"rs-wrapper"},{children:[e&&(0,n.jsx)("div",Object.assign({className:"rs__table_loading"},{children:(0,n.jsxs)("span",{children:[(0,n.jsx)(f.CircularProgress,{size:50}),(0,n.jsx)(f.Typography,Object.assign({align:"center"},{children:"Loading..."}))]})})),(0,n.jsx)(xe,{}),(0,n.jsx)("div",Object.assign({className:"rs__outer_table","data-testid":"grid"},{children:(0,n.jsx)(E,Object.assign({resource_count:"tabs"===i?1:s.length},{children:o}))})),a&&(0,n.jsx)(Ce,{})]}))},$e=e=>(0,n.jsx)(m,Object.assign({initial:e},{children:(0,n.jsx)(Ie,{})}));$e.defaultProps=p,module.exports=t})();